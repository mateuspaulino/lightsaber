{"version":3,"sources":["bundle.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_Lightsaber","_AudioEffect","$","document","querySelector","bind","lightSaber","Lightsaber","lightSaberElem","elem","audio","AudioEffect","createdPlayerRight","createdPlayerLeft","firstClick","addEventListener","state","elemimg","src","pathOff","setState","movement","pathOn","Audio","muted","play","logMovement","window","DeviceOrientationEvent","event","movementGamma","gamma","previousDirection","direction","on","innerHTML","off","./modules/AudioEffect.js","./modules/Lightsaber.js","2","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","this","_on","_off","get","_player","_right","_left","3","_elem","_elemimg","_pathOn","_pathOff"],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAkD,IAAI,GAA1CL,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKa,GAAG,SAAST,EAAQU,EAAOJ,GACvd,YAEA,IAAIK,GAAcX,EAAQ,2BAEtBY,EAAeZ,EAAQ,4BAEvBa,EAAIC,SAASC,cAAcC,KAAKF,UAEhCG,EAAa,GAAIN,GAAYO,WAC7BC,EAAiBF,EAAWG,KAE5BC,EAAQ,GAAIT,GAAaU,YAEzBC,EAAqB,KACrBC,EAAoB,KAEpBC,GAAa,CAEjBN,GAAeO,iBAAiB,QAAS,WAEjCT,EAAWU,OACXV,EAAWW,QAAQC,IAAMZ,EAAWa,QACpCb,EAAWc,UAAS,GACpBC,EAAS,SAETf,EAAWW,QAAQC,IAAMZ,EAAWgB,OACpChB,EAAWc,UAAS,GACpBC,EAAS,OAITP,IACAF,EAAqB,GAAIW,OAAM,sBAC/BX,EAAmBY,OAAQ,EAE3BX,EAAoB,GAAIU,OAAM,qBAC9BV,EAAkBW,OAAQ,EAE1BZ,EAAmBa,OACnBb,EAAmBa,OAEnBZ,EAAkBW,OAAQ,EAC1BZ,EAAmBY,OAAQ,EAE3BV,GAAa,IAIrB,IAAIY,GAAcxB,EAAE,YAEpB,IAAIyB,OAAOC,uBAAwB,CAE/BD,OAAOZ,iBAAiB,oBAAqB,SAAUc,GACnD,GAAIC,GAAgBD,EAAME,KAEtBzB,GAAWU,OAEPK,EADAS,EAAgB,GACP,QACFA,MACE,OAEA,aAMzB,GAAIE,GAAoB,GAEpBX,EAAW,SAAkBY,GAE7B,GAAIA,IAAcD,EAAmB,CACjC,OAAQC,GACJ,IAAK,KACD3B,EAAWc,UAAS,GACpBV,EAAMwB,GAAGT,OACTC,EAAYS,UAAY,IACxB,MACJ,KAAK,MACD7B,EAAWc,UAAS,GACpBV,EAAM0B,IAAIX,OACVC,EAAYS,UAAY,KACxB,MACJ,KAAK,QACDvB,EAAmBa,OACnBC,EAAYS,UAAY,OACxB,MACJ,KAAK,OACDtB,EAAkBY,OAClBC,EAAYS,UAAY,MACxB,MACJ,KAAK,UACDT,EAAYS,UAAY,SACxB,MACJ,SACI7B,EAAWc,UAAS,GACpBV,EAAM0B,IAAIX,OAElBO,EAAoBC,MAIzBI,2BAA2B,EAAEC,0BAA0B,IAAIC,GAAG,SAASlD,EAAQU,EAAOJ,GACzF,YAQA,SAAS6C,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHC,OAAOC,eAAelD,EAAS,cAC3BmD,OAAO,GAGX,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI5D,GAAI,EAAGA,EAAI4D,EAAMrD,OAAQP,IAAK,CAAE,GAAI6D,GAAaD,EAAM5D,EAAI6D,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMV,OAAOC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUT,EAAac,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBN,EAAYgB,UAAWF,GAAiBC,GAAaT,EAAiBN,EAAae,GAAqBf,KAI9gB/C,GAAQgB,YAAc,WACpC,QAASA,KACL6B,EAAgBmB,KAAMhD,EAEtB,IAAIT,GAAIC,SAASC,cAAcC,KAAKF,SACpCwD,MAAKC,IAAM1D,EAAE,aACbyD,KAAKE,KAAO3D,EAAE,cA8BlB,MA3BA6C,GAAapC,IACT4C,IAAK,SACLO,IAAK,WACD,MAAOH,MAAKI,WAGhBR,IAAK,KACLO,IAAK,WACD,MAAOH,MAAKC,OAGhBL,IAAK,MACLO,IAAK,WACD,MAAOH,MAAKE,QAGhBN,IAAK,QACLO,IAAK,WACD,MAAOH,MAAKK,UAGhBT,IAAK,OACLO,IAAK,WACD,MAAOH,MAAKM,UAIbtD,UAGLuD,GAAG,SAAS7E,EAAQU,EAAOJ,GACjC,YAQA,SAAS6C,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHC,OAAOC,eAAelD,EAAS,cAC3BmD,OAAO,GAGX,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI5D,GAAI,EAAGA,EAAI4D,EAAMrD,OAAQP,IAAK,CAAE,GAAI6D,GAAaD,EAAM5D,EAAI6D,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMV,OAAOC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUT,EAAac,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBN,EAAYgB,UAAWF,GAAiBC,GAAaT,EAAiBN,EAAae,GAAqBf,KAI/gB/C,GAAQY,WAAa,WAClC,QAASA,KACLiC,EAAgBmB,KAAMpD,EAEtB,IAAIL,GAAIC,SAASC,cAAcC,KAAKF,SACpCwD,MAAKC,KAAM,EACXD,KAAKQ,MAAQjE,EAAE,eACfyD,KAAKS,SAAWlE,EAAE,mBAClByD,KAAKU,QAAU,0BACfV,KAAKW,SAAW,uBAmCpB,MAhCAvB,GAAaxC,IACTgD,IAAK,WACLT,MAAO,SAAkB9B,GACrB2C,KAAKC,IAAM5C,KAGfuC,IAAK,QACLO,IAAK,WACD,MAAOH,MAAKC,OAGhBL,IAAK,OACLO,IAAK,WACD,MAAOH,MAAKQ,SAGhBZ,IAAK,UACLO,IAAK,WACD,MAAOH,MAAKS,YAGhBb,IAAK,SACLO,IAAK,WACD,MAAOH,MAAKU,WAGhBd,IAAK,UACLO,IAAK,WACD,MAAOH,MAAKW,aAIb/D,eAKA","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _Lightsaber = require('./modules/Lightsaber.js');\n\nvar _AudioEffect = require('./modules/AudioEffect.js');\n\nvar $ = document.querySelector.bind(document);\n\nvar lightSaber = new _Lightsaber.Lightsaber();\nvar lightSaberElem = lightSaber.elem;\n\nvar audio = new _AudioEffect.AudioEffect();\n\nvar createdPlayerRight = null;\nvar createdPlayerLeft = null;\n\nvar firstClick = true;\n\nlightSaberElem.addEventListener('click', function () {\n\n    if (lightSaber.state) {\n        lightSaber.elemimg.src = lightSaber.pathOff;\n        lightSaber.setState(false);\n        movement(\"off\");\n    } else {\n        lightSaber.elemimg.src = lightSaber.pathOn;\n        lightSaber.setState(true);\n        movement(\"on\");\n    }\n\n    //I had to create / play some audios dynamically on the first click, because on mobile, some browsers do not accept to trigger audio, so it's a way to turn it on\n    if (firstClick) {\n        createdPlayerRight = new Audio('../audio/right.mp3');\n        createdPlayerRight.muted = true;\n\n        createdPlayerLeft = new Audio('../audio/left.mp3');\n        createdPlayerLeft.muted = true;\n\n        createdPlayerRight.play();\n        createdPlayerRight.play();\n\n        createdPlayerLeft.muted = false;\n        createdPlayerRight.muted = false;\n\n        firstClick = false;\n    }\n});\n\nvar logMovement = $('header h1');\n\nif (window.DeviceOrientationEvent) {\n    var sinal = 0;\n    window.addEventListener('deviceorientation', function (event) {\n        var movementGamma = event.gamma;\n\n        if (lightSaber.state) {\n            if (movementGamma > 25) {\n                movement(\"right\");\n            } else if (movementGamma < -25) {\n                movement(\"left\");\n            } else {\n                movement(\"stopped\");\n            }\n        }\n    });\n}\n\nvar previousDirection = \"\";\n\nvar movement = function movement(direction) {\n\n    if (direction !== previousDirection) {\n        switch (direction) {\n            case \"on\":\n                lightSaber.setState(true);\n                audio.on.play();\n                logMovement.innerHTML = \"on\";\n                break;\n            case \"off\":\n                lightSaber.setState(false);\n                audio.off.play();\n                logMovement.innerHTML = \"off\";\n                break;\n            case \"right\":\n                createdPlayerRight.play();\n                logMovement.innerHTML = \"right\";\n                break;\n            case \"left\":\n                createdPlayerLeft.play();\n                logMovement.innerHTML = \"left\";\n                break;\n            case \"stopped\":\n                logMovement.innerHTML = \"stopped\";\n                break;\n            default:\n                lightSaber.setState(false);\n                audio.off.play();\n        }\n        previousDirection = direction;\n    }\n};\n\n},{\"./modules/AudioEffect.js\":2,\"./modules/Lightsaber.js\":3}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AudioEffect = exports.AudioEffect = function () {\n    function AudioEffect() {\n        _classCallCheck(this, AudioEffect);\n\n        var $ = document.querySelector.bind(document);\n        this._on = $('.audio#on');\n        this._off = $('.audio#off');\n    }\n\n    _createClass(AudioEffect, [{\n        key: 'player',\n        get: function get() {\n            return this._player;\n        }\n    }, {\n        key: 'on',\n        get: function get() {\n            return this._on;\n        }\n    }, {\n        key: 'off',\n        get: function get() {\n            return this._off;\n        }\n    }, {\n        key: 'right',\n        get: function get() {\n            return this._right;\n        }\n    }, {\n        key: 'left',\n        get: function get() {\n            return this._left;\n        }\n    }]);\n\n    return AudioEffect;\n}();\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Lightsaber = exports.Lightsaber = function () {\n    function Lightsaber() {\n        _classCallCheck(this, Lightsaber);\n\n        var $ = document.querySelector.bind(document);\n        this._on = false;\n        this._elem = $('.lightsaber');\n        this._elemimg = $('.lightsaber img');\n        this._pathOn = \"./img/lightsaber-on.png\";\n        this._pathOff = \"./img/lightsaber.png\";\n    }\n\n    _createClass(Lightsaber, [{\n        key: 'setState',\n        value: function setState(state) {\n            this._on = state;\n        }\n    }, {\n        key: 'state',\n        get: function get() {\n            return this._on;\n        }\n    }, {\n        key: 'elem',\n        get: function get() {\n            return this._elem;\n        }\n    }, {\n        key: 'elemimg',\n        get: function get() {\n            return this._elemimg;\n        }\n    }, {\n        key: 'pathOn',\n        get: function get() {\n            return this._pathOn;\n        }\n    }, {\n        key: 'pathOff',\n        get: function get() {\n            return this._pathOff;\n        }\n    }]);\n\n    return Lightsaber;\n}();\n\n// export { Lightsaber as default}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvYXNzZXRzL2pzL21haW4uanMiLCJhcHAvYXNzZXRzL2pzL21vZHVsZXMvQXVkaW9FZmZlY3QuanMiLCJhcHAvYXNzZXRzL2pzL21vZHVsZXMvTGlnaHRzYWJlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7O0FBQ0E7O0FBRUEsSUFBSSxJQUFJLFNBQVMsYUFBVCxDQUF1QixJQUF2QixDQUE0QixRQUE1QixDQUFSOztBQUVBLElBQUksYUFBYSw0QkFBakI7QUFDQSxJQUFJLGlCQUFpQixXQUFXLElBQWhDOztBQUVBLElBQUksUUFBUSw4QkFBWjs7QUFFQSxJQUFJLHFCQUFxQixJQUF6QjtBQUNBLElBQUksb0JBQW9CLElBQXhCOztBQUVBLElBQUksYUFBYSxJQUFqQjs7QUFFQSxlQUFlLGdCQUFmLENBQWdDLE9BQWhDLEVBQXlDLFlBQVU7O0FBRS9DLFFBQUcsV0FBVyxLQUFkLEVBQW9CO0FBQ2hCLG1CQUFXLE9BQVgsQ0FBbUIsR0FBbkIsR0FBeUIsV0FBVyxPQUFwQztBQUNBLG1CQUFXLFFBQVgsQ0FBb0IsS0FBcEI7QUFDQSxpQkFBUyxLQUFUO0FBQ0gsS0FKRCxNQUlLO0FBQ0QsbUJBQVcsT0FBWCxDQUFtQixHQUFuQixHQUF5QixXQUFXLE1BQXBDO0FBQ0EsbUJBQVcsUUFBWCxDQUFvQixJQUFwQjtBQUNBLGlCQUFTLElBQVQ7QUFDSDs7QUFFRDtBQUNBLFFBQUcsVUFBSCxFQUFjO0FBQ1YsNkJBQXFCLElBQUksS0FBSixDQUFVLG9CQUFWLENBQXJCO0FBQ0EsMkJBQW1CLEtBQW5CLEdBQTJCLElBQTNCOztBQUVBLDRCQUFvQixJQUFJLEtBQUosQ0FBVSxtQkFBVixDQUFwQjtBQUNBLDBCQUFrQixLQUFsQixHQUEwQixJQUExQjs7QUFFQSwyQkFBbUIsSUFBbkI7QUFDQSwyQkFBbUIsSUFBbkI7O0FBRUEsMEJBQWtCLEtBQWxCLEdBQTBCLEtB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QUFDSDs7OzRCQUNZO0FBQ1QsbUJBQU8sS0FBSyxRQUFaO0FBQ0g7Ozs7OztBQUdMIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7IExpZ2h0c2FiZXIgfSBmcm9tICcuL21vZHVsZXMvTGlnaHRzYWJlci5qcyc7XG5pbXBvcnQgeyBBdWRpb0VmZmVjdCB9IGZyb20gJy4vbW9kdWxlcy9BdWRpb0VmZmVjdC5qcyc7XG5cbmxldCAkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvci5iaW5kKGRvY3VtZW50KTtcblxubGV0IGxpZ2h0U2FiZXIgPSBuZXcgTGlnaHRzYWJlcigpO1xubGV0IGxpZ2h0U2FiZXJFbGVtID0gbGlnaHRTYWJlci5lbGVtO1xuXG5sZXQgYXVkaW8gPSBuZXcgQXVkaW9FZmZlY3QoKTtcblxubGV0IGNyZWF0ZWRQbGF5ZXJSaWdodCA9IG51bGw7XG5sZXQgY3JlYXRlZFBsYXllckxlZnQgPSBudWxsO1xuXG5sZXQgZmlyc3RDbGljayA9IHRydWU7XG5cbmxpZ2h0U2FiZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcblxuICAgIGlmKGxpZ2h0U2FiZXIuc3RhdGUpe1xuICAgICAgICBsaWdodFNhYmVyLmVsZW1pbWcuc3JjID0gbGlnaHRTYWJlci5wYXRoT2ZmO1xuICAgICAgICBsaWdodFNhYmVyLnNldFN0YXRlKGZhbHNlKTtcbiAgICAgICAgbW92ZW1lbnQoXCJvZmZcIik7XG4gICAgfWVsc2V7XG4gICAgICAgIGxpZ2h0U2FiZXIuZWxlbWltZy5zcmMgPSBsaWdodFNhYmVyLnBhdGhPbjtcbiAgICAgICAgbGlnaHRTYWJlci5zZXRTdGF0ZSh0cnVlKTsgICAgICAgIFxuICAgICAgICBtb3ZlbWVudChcIm9uXCIpO1xuICAgIH1cbiAgICBcbiAgICAvL0kgaGFkIHRvIGNyZWF0ZSAvIHBsYXkgc29tZSBhdWRpb3MgZHluYW1pY2FsbHkgb24gdGhlIGZpcnN0IGNsaWNrLCBiZWNhdXNlIG9uIG1vYmlsZSwgc29tZSBicm93c2VycyBkbyBub3QgYWNjZXB0IHRvIHRyaWdnZXIgYXVkaW8sIHNvIGl0J3MgYSB3YXkgdG8gdHVybiBpdCBvblxuICAgIGlmKGZpcnN0Q2xpY2spe1xuICAgICAgICBjcmVhdGVkUGxheWVyUmlnaHQgPSBuZXcgQXVkaW8oJy4uL2F1ZGlvL3JpZ2h0Lm1wMycpO1xuICAgICAgICBjcmVhdGVkUGxheWVyUmlnaHQubXV0ZWQgPSB0cnVlO1xuICAgIFxuICAgICAgICBjcmVhdGVkUGxheWVyTGVmdCA9IG5ldyBBdWRpbygnLi4vYXVkaW8vbGVmdC5tcDMnKTtcbiAgICAgICAgY3JlYXRlZFBsYXllckxlZnQubXV0ZWQgPSB0cnVlO1xuICAgIFxuICAgICAgICBjcmVhdGVkUGxheWVyUmlnaHQucGxheSgpO1xuICAgICAgICBjcmVhdGVkUGxheWVyUmlnaHQucGxheSgpO1xuICAgIFxuICAgICAgICBjcmVhdGVkUGxheWVyTGVmdC5tdXRlZCA9IGZhbHNlO1xuICAgICAgICBjcmVhdGVkUGxheWVyUmlnaHQubXV0ZWQgPSBmYWxzZTtcblxuICAgICAgICBmaXJzdENsaWNrID0gZmFsc2U7XG4gICAgfVxuXG59KTtcblxubGV0IGxvZ01vdmVtZW50ID0gJCgnaGVhZGVyIGgxJyk7XG5cbmlmKHdpbmRvdy5EZXZpY2VPcmllbnRhdGlvbkV2ZW50KXtcbiAgICBsZXQgc2luYWwgPSAwO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsZnVuY3Rpb24oZXZlbnQpeyBcbiAgICAgICAgbGV0IG1vdmVtZW50R2FtbWEgPSBldmVudC5nYW1tYTtcblxuICAgICAgICBpZihsaWdodFNhYmVyLnN0YXRlKXtcbiAgICAgICAgICAgIGlmKG1vdmVtZW50R2FtbWE+MjUpe1xuICAgICAgICAgICAgICAgIG1vdmVtZW50KFwicmlnaHRcIik7XG4gICAgICAgICAgICB9ZWxzZSBpZihtb3ZlbWVudEdhbW1hPC0yNSl7XG4gICAgICAgICAgICAgICAgbW92ZW1lbnQoXCJsZWZ0XCIpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbW92ZW1lbnQoXCJzdG9wcGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9KTtcbn1cblxubGV0IHByZXZpb3VzRGlyZWN0aW9uID0gXCJcIjtcblxuY29uc3QgbW92ZW1lbnQgPSAoZGlyZWN0aW9uKSA9PiB7XG4gICAgXG4gICAgaWYoZGlyZWN0aW9uICE9PSBwcmV2aW91c0RpcmVjdGlvbil7XG4gICAgICAgIHN3aXRjaChkaXJlY3Rpb24pe1xuICAgICAgICAgICAgY2FzZSBcIm9uXCI6XG4gICAgICAgICAgICAgICAgbGlnaHRTYWJlci5zZXRTdGF0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBhdWRpby5vbi5wbGF5KCk7XG4gICAgICAgICAgICAgICAgbG9nTW92ZW1lbnQuaW5uZXJIVE1MID0gXCJvblwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwib2ZmXCI6XG4gICAgICAgICAgICAgICAgbGlnaHRTYWJlci5zZXRTdGF0ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgYXVkaW8ub2ZmLnBsYXkoKTtcbiAgICAgICAgICAgICAgICBsb2dNb3ZlbWVudC5pbm5lckhUTUwgPSBcIm9mZlwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgICAgICAgICBjcmVhdGVkUGxheWVyUmlnaHQucGxheSgpO1xuICAgICAgICAgICAgICAgIGxvZ01vdmVtZW50LmlubmVySFRNTCA9IFwicmlnaHRcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgICAgICAgICAgY3JlYXRlZFBsYXllckxlZnQucGxheSgpO1xuICAgICAgICAgICAgICAgIGxvZ01vdmVtZW50LmlubmVySFRNTCA9IFwibGVmdFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInN0b3BwZWRcIjpcbiAgICAgICAgICAgICAgICBsb2dNb3ZlbWVudC5pbm5lckhUTUwgPSBcInN0b3BwZWRcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgbGlnaHRTYWJlci5zZXRTdGF0ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgYXVkaW8ub2ZmLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91c0RpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICB9XG5cbn07XG5cbiIsImV4cG9ydCBjbGFzcyBBdWRpb0VmZmVjdCB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgbGV0ICQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yLmJpbmQoZG9jdW1lbnQpO1xuICAgICAgICB0aGlzLl9vbiA9ICQoJy5hdWRpbyNvbicpO1xuICAgICAgICB0aGlzLl9vZmYgPSAkKCcuYXVkaW8jb2ZmJyk7XG4gICAgfVxuICAgIGdldCBwbGF5ZXIoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXllcjtcbiAgICB9XG4gICAgZ2V0IG9uKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl9vbjtcbiAgICB9XG4gICAgZ2V0IG9mZigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fb2ZmO1xuICAgIH0gIFxuICAgIGdldCByaWdodCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5fcmlnaHQ7XG4gICAgfSAgXG4gICAgZ2V0IGxlZnQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xlZnQ7XG4gICAgfSAgICAgIFxufVxuIiwiZXhwb3J0IGNsYXNzIExpZ2h0c2FiZXIge1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIGxldCAkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvci5iaW5kKGRvY3VtZW50KTtcbiAgICAgICAgdGhpcy5fb24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZWxlbSA9ICQoJy5saWdodHNhYmVyJyk7XG4gICAgICAgIHRoaXMuX2VsZW1pbWcgPSAkKCcubGlnaHRzYWJlciBpbWcnKTtcbiAgICAgICAgdGhpcy5fcGF0aE9uID0gXCIuL2ltZy9saWdodHNhYmVyLW9uLnBuZ1wiO1xuICAgICAgICB0aGlzLl9wYXRoT2ZmID0gXCIuL2ltZy9saWdodHNhYmVyLnBuZ1wiO1xuICAgIH1cbiAgICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICB0aGlzLl9vbiA9IHN0YXRlO1xuICAgIH1cbiAgICBnZXQgc3RhdGUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uO1xuICAgIH0gXG4gICAgICBcbiAgICBnZXQgZWxlbSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbTtcbiAgICB9IFxuICAgIGdldCBlbGVtaW1nKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtaW1nO1xuICAgIH0gXG4gICAgZ2V0IHBhdGhPbigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fcGF0aE9uO1xuICAgIH0gXG4gICAgZ2V0IHBhdGhPZmYoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhdGhPZmY7XG4gICAgfSAgICBcbn1cblxuLy8gZXhwb3J0IHsgTGlnaHRzYWJlciBhcyBkZWZhdWx0fSJdfQ==\n"]}