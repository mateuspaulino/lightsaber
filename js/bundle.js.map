{"version":3,"sources":["bundle.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_Lightsaber","_AudioEffect","$","document","querySelector","bind","lightSaber","Lightsaber","lightSaberElem","elem","audio","AudioEffect","createdPlayerRight","createdPlayerLeft","firstClick","addEventListener","state","elemimg","src","pathOff","setState","movement","pathOn","Audio","muted","play","logMovement","window","DeviceOrientationEvent","event","movementGamma","gamma","previousDirection","direction","on","off","innerHTML","./modules/AudioEffect.js","./modules/Lightsaber.js","2","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","this","_on","_off","get","_player","_right","_left","3","_elem","_elemimg","_pathOn","_pathOff"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _Lightsaber = require('./modules/Lightsaber.js');\n\nvar _AudioEffect = require('./modules/AudioEffect.js');\n\nvar $ = document.querySelector.bind(document);\n\nvar lightSaber = new _Lightsaber.Lightsaber();\nvar lightSaberElem = lightSaber.elem;\n\nvar audio = new _AudioEffect.AudioEffect();\n\nvar createdPlayerRight = null;\nvar createdPlayerLeft = null;\n\nvar firstClick = true;\n\nlightSaberElem.addEventListener('click', function () {\n\n    if (lightSaber.state) {\n        lightSaber.elemimg.src = lightSaber.pathOff;\n        lightSaber.setState(false);\n        movement(\"off\");\n    } else {\n        lightSaber.elemimg.src = lightSaber.pathOn;\n        lightSaber.setState(true);\n        movement(\"on\");\n    }\n\n    //I had to create / play some audios dynamically on the first click, because on mobile, some browsers do not accept to trigger audio, so it's a way to turn it on\n    if (firstClick) {\n        createdPlayerRight = new Audio('../audio/right.mp3');\n        createdPlayerRight.muted = true;\n\n        createdPlayerLeft = new Audio('../audio/left.mp3');\n        createdPlayerLeft.muted = true;\n\n        createdPlayerRight.play();\n        createdPlayerRight.play();\n\n        createdPlayerLeft.muted = false;\n        createdPlayerRight.muted = false;\n\n        firstClick = false;\n    }\n});\n\nvar logMovement = $('header h1');\n\nif (window.DeviceOrientationEvent) {\n    var sinal = 0;\n    window.addEventListener('deviceorientation', function (event) {\n        var movementGamma = event.gamma;\n\n        if (lightSaber.state) {\n            if (movementGamma > 25) {\n                movement(\"right\");\n            } else if (movementGamma < -25) {\n                movement(\"left\");\n            } else {\n                movement(\"stopped\");\n            }\n        }\n    });\n}\n\nvar previousDirection = \"\";\n\nvar movement = function movement(direction) {\n\n    if (direction !== previousDirection) {\n        switch (direction) {\n            case \"on\":\n                lightSaber.setState(true);\n                audio.on.play();\n                break;\n            case \"off\":\n                lightSaber.setState(false);\n                audio.off.play();\n                logMovement.innerHTML = \"desligado\";\n                break;\n            case \"right\":\n                createdPlayerRight.play();\n                logMovement.innerHTML = \"direita\";\n                break;\n            case \"left\":\n                createdPlayerLeft.play();\n                logMovement.innerHTML = \"esquerda\";\n                break;\n            case \"stopped\":\n                logMovement.innerHTML = \"parado\";\n                break;\n            default:\n                lightSaber.setState(false);\n                audio.off.play();\n        }\n        previousDirection = direction;\n    }\n};\n\n},{\"./modules/AudioEffect.js\":2,\"./modules/Lightsaber.js\":3}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AudioEffect = exports.AudioEffect = function () {\n    function AudioEffect() {\n        _classCallCheck(this, AudioEffect);\n\n        var $ = document.querySelector.bind(document);\n        this._on = $('.audio#on');\n        this._off = $('.audio#off');\n    }\n\n    _createClass(AudioEffect, [{\n        key: 'player',\n        get: function get() {\n            return this._player;\n        }\n    }, {\n        key: 'on',\n        get: function get() {\n            return this._on;\n        }\n    }, {\n        key: 'off',\n        get: function get() {\n            return this._off;\n        }\n    }, {\n        key: 'right',\n        get: function get() {\n            return this._right;\n        }\n    }, {\n        key: 'left',\n        get: function get() {\n            return this._left;\n        }\n    }]);\n\n    return AudioEffect;\n}();\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Lightsaber = exports.Lightsaber = function () {\n    function Lightsaber() {\n        _classCallCheck(this, Lightsaber);\n\n        var $ = document.querySelector.bind(document);\n        this._on = false;\n        this._elem = $('.lightsaber');\n        this._elemimg = $('.lightsaber img');\n        this._pathOn = \"./img/lightsaber-on.png\";\n        this._pathOff = \"./img/lightsaber.png\";\n    }\n\n    _createClass(Lightsaber, [{\n        key: 'setState',\n        value: function setState(state) {\n            this._on = state;\n        }\n    }, {\n        key: 'state',\n        get: function get() {\n            return this._on;\n        }\n    }, {\n        key: 'elem',\n        get: function get() {\n            return this._elem;\n        }\n    }, {\n        key: 'elemimg',\n        get: function get() {\n            return this._elemimg;\n        }\n    }, {\n        key: 'pathOn',\n        get: function get() {\n            return this._pathOn;\n        }\n    }, {\n        key: 'pathOff',\n        get: function get() {\n            return this._pathOff;\n        }\n    }]);\n\n    return Lightsaber;\n}();\n\n// export { Lightsaber as default}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvYXNzZXRzL2pzL21haW4uanMiLCJhcHAvYXNzZXRzL2pzL21vZHVsZXMvQXVkaW9FZmZlY3QuanMiLCJhcHAvYXNzZXRzL2pzL21vZHVsZXMvTGlnaHRzYWJlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7O0FBQ0E7O0FBRUEsSUFBSSxJQUFJLFNBQVMsYUFBVCxDQUF1QixJQUF2QixDQUE0QixRQUE1QixDQUFSOztBQUVBLElBQUksYUFBYSw0QkFBakI7QUFDQSxJQUFJLGlCQUFpQixXQUFXLElBQWhDOztBQUVBLElBQUksUUFBUSw4QkFBWjs7QUFFQSxJQUFJLHFCQUFxQixJQUF6QjtBQUNBLElBQUksb0JBQW9CLElBQXhCOztBQUVBLElBQUksYUFBYSxJQUFqQjs7QUFFQSxlQUFlLGdCQUFmLENBQWdDLE9BQWhDLEVBQXlDLFlBQVU7O0FBRS9DLFFBQUcsV0FBVyxLQUFkLEVBQW9CO0FBQ2hCLG1CQUFXLE9BQVgsQ0FBbUIsR0FBbkIsR0FBeUIsV0FBVyxPQUFwQztBQUNBLG1CQUFXLFFBQVgsQ0FBb0IsS0FBcEI7QUFDQSxpQkFBUyxLQUFUO0FBQ0gsS0FKRCxNQUlLO0FBQ0QsbUJBQVcsT0FBWCxDQUFtQixHQUFuQixHQUF5QixXQUFXLE1BQXBDO0FBQ0EsbUJBQVcsUUFBWCxDQUFvQixJQUFwQjtBQUNBLGlCQUFTLElBQVQ7QUFDSDs7QUFFRDtBQUNBLFFBQUcsVUFBSCxFQUFjO0FBQ1YsNkJBQXFCLElBQUksS0FBSixDQUFVLG9CQUFWLENBQXJCO0FBQ0EsMkJBQW1CLEtBQW5CLEdBQTJCLElBQTNCOztBQUVBLDRCQUFvQixJQUFJLEtBQUosQ0FBVSxtQkFBVixDQUFwQjtBQUNBLDBCQUFrQixLQUFsQixHQUEwQixJQUExQjs7QUFFQSwyQkFBbUIsSUFBbkI7QUFDQSwyQkFBbUIsSUFBbkI7O0FBRUEsMEJBQWtCLEtBQWxCLEdBQTBCLEtB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LFFBQVo7QUFDSDs7Ozs7O0FBR0wiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHsgTGlnaHRzYWJlciB9IGZyb20gJy4vbW9kdWxlcy9MaWdodHNhYmVyLmpzJztcbmltcG9ydCB7IEF1ZGlvRWZmZWN0IH0gZnJvbSAnLi9tb2R1bGVzL0F1ZGlvRWZmZWN0LmpzJztcblxubGV0ICQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yLmJpbmQoZG9jdW1lbnQpO1xuXG5sZXQgbGlnaHRTYWJlciA9IG5ldyBMaWdodHNhYmVyKCk7XG5sZXQgbGlnaHRTYWJlckVsZW0gPSBsaWdodFNhYmVyLmVsZW07XG5cbmxldCBhdWRpbyA9IG5ldyBBdWRpb0VmZmVjdCgpO1xuXG5sZXQgY3JlYXRlZFBsYXllclJpZ2h0ID0gbnVsbDtcbmxldCBjcmVhdGVkUGxheWVyTGVmdCA9IG51bGw7XG5cbmxldCBmaXJzdENsaWNrID0gdHJ1ZTtcblxubGlnaHRTYWJlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuXG4gICAgaWYobGlnaHRTYWJlci5zdGF0ZSl7XG4gICAgICAgIGxpZ2h0U2FiZXIuZWxlbWltZy5zcmMgPSBsaWdodFNhYmVyLnBhdGhPZmY7XG4gICAgICAgIGxpZ2h0U2FiZXIuc2V0U3RhdGUoZmFsc2UpO1xuICAgICAgICBtb3ZlbWVudChcIm9mZlwiKTtcbiAgICB9ZWxzZXtcbiAgICAgICAgbGlnaHRTYWJlci5lbGVtaW1nLnNyYyA9IGxpZ2h0U2FiZXIucGF0aE9uO1xuICAgICAgICBsaWdodFNhYmVyLnNldFN0YXRlKHRydWUpOyAgICAgICAgXG4gICAgICAgIG1vdmVtZW50KFwib25cIik7XG4gICAgfVxuICAgIFxuICAgIC8vSSBoYWQgdG8gY3JlYXRlIC8gcGxheSBzb21lIGF1ZGlvcyBkeW5hbWljYWxseSBvbiB0aGUgZmlyc3QgY2xpY2ssIGJlY2F1c2Ugb24gbW9iaWxlLCBzb21lIGJyb3dzZXJzIGRvIG5vdCBhY2NlcHQgdG8gdHJpZ2dlciBhdWRpbywgc28gaXQncyBhIHdheSB0byB0dXJuIGl0IG9uXG4gICAgaWYoZmlyc3RDbGljayl7XG4gICAgICAgIGNyZWF0ZWRQbGF5ZXJSaWdodCA9IG5ldyBBdWRpbygnLi4vYXVkaW8vcmlnaHQubXAzJyk7XG4gICAgICAgIGNyZWF0ZWRQbGF5ZXJSaWdodC5tdXRlZCA9IHRydWU7XG4gICAgXG4gICAgICAgIGNyZWF0ZWRQbGF5ZXJMZWZ0ID0gbmV3IEF1ZGlvKCcuLi9hdWRpby9sZWZ0Lm1wMycpO1xuICAgICAgICBjcmVhdGVkUGxheWVyTGVmdC5tdXRlZCA9IHRydWU7XG4gICAgXG4gICAgICAgIGNyZWF0ZWRQbGF5ZXJSaWdodC5wbGF5KCk7XG4gICAgICAgIGNyZWF0ZWRQbGF5ZXJSaWdodC5wbGF5KCk7XG4gICAgXG4gICAgICAgIGNyZWF0ZWRQbGF5ZXJMZWZ0Lm11dGVkID0gZmFsc2U7XG4gICAgICAgIGNyZWF0ZWRQbGF5ZXJSaWdodC5tdXRlZCA9IGZhbHNlO1xuXG4gICAgICAgIGZpcnN0Q2xpY2sgPSBmYWxzZTtcbiAgICB9XG5cbn0pO1xuXG5sZXQgbG9nTW92ZW1lbnQgPSAkKCdoZWFkZXIgaDEnKTtcblxuaWYod2luZG93LkRldmljZU9yaWVudGF0aW9uRXZlbnQpe1xuICAgIGxldCBzaW5hbCA9IDA7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uJyxmdW5jdGlvbihldmVudCl7IFxuICAgICAgICBsZXQgbW92ZW1lbnRHYW1tYSA9IGV2ZW50LmdhbW1hO1xuXG4gICAgICAgIGlmKGxpZ2h0U2FiZXIuc3RhdGUpe1xuICAgICAgICAgICAgaWYobW92ZW1lbnRHYW1tYT4yNSl7XG4gICAgICAgICAgICAgICAgbW92ZW1lbnQoXCJyaWdodFwiKTtcbiAgICAgICAgICAgIH1lbHNlIGlmKG1vdmVtZW50R2FtbWE8LTI1KXtcbiAgICAgICAgICAgICAgICBtb3ZlbWVudChcImxlZnRcIik7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBtb3ZlbWVudChcInN0b3BwZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0pO1xufVxuXG5sZXQgcHJldmlvdXNEaXJlY3Rpb24gPSBcIlwiO1xuXG5jb25zdCBtb3ZlbWVudCA9IChkaXJlY3Rpb24pID0+IHtcbiAgICBcbiAgICBpZihkaXJlY3Rpb24gIT09IHByZXZpb3VzRGlyZWN0aW9uKXtcbiAgICAgICAgc3dpdGNoKGRpcmVjdGlvbil7XG4gICAgICAgICAgICBjYXNlIFwib25cIjpcbiAgICAgICAgICAgICAgICBsaWdodFNhYmVyLnNldFN0YXRlKHRydWUpO1xuICAgICAgICAgICAgICAgIGF1ZGlvLm9uLnBsYXkoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm9mZlwiOlxuICAgICAgICAgICAgICAgIGxpZ2h0U2FiZXIuc2V0U3RhdGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGF1ZGlvLm9mZi5wbGF5KCk7XG4gICAgICAgICAgICAgICAgbG9nTW92ZW1lbnQuaW5uZXJIVE1MID0gXCJkZXNsaWdhZG9cIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJpZ2h0XCI6XG4gICAgICAgICAgICAgICAgY3JlYXRlZFBsYXllclJpZ2h0LnBsYXkoKTtcbiAgICAgICAgICAgICAgICBsb2dNb3ZlbWVudC5pbm5lckhUTUwgPSBcImRpcmVpdGFcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgICAgICAgICAgY3JlYXRlZFBsYXllckxlZnQucGxheSgpO1xuICAgICAgICAgICAgICAgIGxvZ01vdmVtZW50LmlubmVySFRNTCA9IFwiZXNxdWVyZGFcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzdG9wcGVkXCI6XG4gICAgICAgICAgICAgICAgbG9nTW92ZW1lbnQuaW5uZXJIVE1MID0gXCJwYXJhZG9cIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgbGlnaHRTYWJlci5zZXRTdGF0ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgYXVkaW8ub2ZmLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91c0RpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICB9XG5cbn07XG5cbiIsImV4cG9ydCBjbGFzcyBBdWRpb0VmZmVjdCB7XG4gICAgY29uc3RydWN0b3IoKXtcbiAgICAgICAgbGV0ICQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yLmJpbmQoZG9jdW1lbnQpO1xuICAgICAgICB0aGlzLl9vbiA9ICQoJy5hdWRpbyNvbicpO1xuICAgICAgICB0aGlzLl9vZmYgPSAkKCcuYXVkaW8jb2ZmJyk7XG4gICAgfVxuICAgIGdldCBwbGF5ZXIoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXllcjtcbiAgICB9XG4gICAgZ2V0IG9uKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl9vbjtcbiAgICB9XG4gICAgZ2V0IG9mZigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fb2ZmO1xuICAgIH0gIFxuICAgIGdldCByaWdodCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5fcmlnaHQ7XG4gICAgfSAgXG4gICAgZ2V0IGxlZnQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xlZnQ7XG4gICAgfSAgICAgIFxufVxuIiwiZXhwb3J0IGNsYXNzIExpZ2h0c2FiZXIge1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIGxldCAkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvci5iaW5kKGRvY3VtZW50KTtcbiAgICAgICAgdGhpcy5fb24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZWxlbSA9ICQoJy5saWdodHNhYmVyJyk7XG4gICAgICAgIHRoaXMuX2VsZW1pbWcgPSAkKCcubGlnaHRzYWJlciBpbWcnKTtcbiAgICAgICAgdGhpcy5fcGF0aE9uID0gXCIuL2ltZy9saWdodHNhYmVyLW9uLnBuZ1wiO1xuICAgICAgICB0aGlzLl9wYXRoT2ZmID0gXCIuL2ltZy9saWdodHNhYmVyLnBuZ1wiO1xuICAgIH1cbiAgICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICB0aGlzLl9vbiA9IHN0YXRlO1xuICAgIH1cbiAgICBnZXQgc3RhdGUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uO1xuICAgIH0gXG4gICAgICBcbiAgICBnZXQgZWxlbSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbTtcbiAgICB9IFxuICAgIGdldCBlbGVtaW1nKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtaW1nO1xuICAgIH0gXG4gICAgZ2V0IHBhdGhPbigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fcGF0aE9uO1xuICAgIH0gXG4gICAgZ2V0IHBhdGhPZmYoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhdGhPZmY7XG4gICAgfSAgICBcbn1cblxuLy8gZXhwb3J0IHsgTGlnaHRzYWJlciBhcyBkZWZhdWx0fSJdfQ==\n"]}